# Poročilo
1.FAZA: Izbira teme

Kot strasten navijač nogometnega kluba Arsenal F.C. sem za svojo temo analiziranja izbral Analiza igralcev nogometnega kluba Arsenal Football Club. Osnovna ideja je analiza vsakega igralca v zgodovini nogometnega kluba po različnih spremenljivkah treh tipov. Podatke iz spletne strani bom prenesel v program  Microsoft Office Excel Worksheet in tako oblikoval novo tabelo, ki se bo od originalne razlikovala še za dodano urejenostno spremenljivo, ki v originalni tabeli ni podana. Tabelo bom shranil v CSV obliki, tako da jo bom lahko uvozil v program  R. Za vsakega igralca, ki je kadarkoli zaigral za Arsenal F.C., bom podal: 
- državo iz katere igralec prihaja (imenska spremenljivka)
- njegovo standardno pozicijo v igri (imenska spremenljivka,ki bo podana v angleških,mednarodnih kraticah)
- letnice delovanja v omenjenem nogometnem klubu (številska spremenljivka, podana v obliki od-do)
- število nastopov za klub (številska spremenljivka)
- število zadetkov za klub (številska spremenljivka)
- status nogometaša v klubu (urejenostna spremenljivka, katero bom opredelil glede na število nastopov, ki jih je nogometaš dosegel v klubu. Nogometaše bom razdelil v tri skupine: "Začetnik v Arsenalu"(do 150 nastopov), "Izkušen Arsenalovec"(od 150-300 nastopov), "Arsenalova legenda"(nad 300 nastopov)).
Države, katerih državljani so bili in so še nogometaši bom prikazal tudi na zemljevidu.

Cilj projekta je ugotovitev katerim nogometašem se je uspelo prebiti v klubsko zgodovino s svojim doprinosom v klubu, predvsem pa spoznavanje orodja analiziranja v programu R na nekem konkretnem, zame osebno zanimivem primeru. 

Povezava do podatkovne tabele o moji tematiki: 
http://en.wikipedia.org/wiki/List_of_Arsenal_F.C._players

2.FAZA:Obdelava, uvoz in čiščenje podatkov

V tej fazi sem za začetek uvozil tabelo, ki se imenuje nogometasi. To tabelo sem dobil tako, da sem podatke iz spletne strani pretvoril v Excel ter jih shranil v CSV obliki. Nato sem tabelo v program uvozil s pomočjo uvoza CSV datoteke (read.csv). Tabela nogometasi vsebuje 6 stolpcev. Imena vrstic so imena nogometašev, ki so kadarkoli zaigrali za FC Arsenal. Tabela vsebuje še 5 preostalih stolpcev. To so DRŽAVA (pove nam iz katere države prihaja nogometaš- imenska spremenljivka), POZICIJA (pove katero pozicijo je ali jo nogometaš igra za Arsenal- imenska spremenljivka), LETNICE DELOVANJA (pove nam od katerega do katerega leta je posamezen igralec igral za Arsenal- številska spremenljivka), NASTOPI (pove kaoliko nastopov je zbral določen igralec za Arsenal- številska spremenljivka) in stolpec ZADETKI (pove koliko golov je vsak igralec zabil za Arsenal- številska spremenljivka). Zatem sem naredil urejenostni vektor z namenom, da tabeli nogometasi dodam stolpec z urejenostno spremenjivko za vsakega igralca posebej (v izbiri teme je pojasnjeno kakšno urejenostno spremenjivko sem dodal). Z ukazom data.frame sem tabeli nogometasi dodal stolpec z urejenostno spremenljivko ter novo tabelo zaradi preglednosti poimenoval z velikimi tiskanimi črkami(NOGOMETASI). Tabela NOGOMETASI je tako zgrajena iz sedmih stolpcev, kjer so imena vrstic še vedno imena nogometašev. Vsebuje pa še stolpce DRŽAVA, POZICIJA, LETNICE DELOVANJA, NASTOPI, ZADETKI in STATUS, ki predstavlja stolpec z urejenostno spremenljivko. Vse glavne tabele, v katerih sem in bom obdeloval podatke sem shranil pod imena z velikimi tiskanimi črkami. Tako vem v katerih tabelah se nahajajo vsi podatki potrebni za obdelavo.

Sledil je uvoz s spletne strani. Tabelo, iz katere sem podatke prej pretvoril v excel sem sedaj uvozil kar s spletne strani. Potrebno je bilo v program unesti knjižnico XML, brez katere uvoz nebi bil mogoč. Uvoženo tabelo sem poimenovl arsenal|. Tabela arsenal se od tabele nogometasi po vrednostih v stolpcih ne razlikuje. Razlike so le v imenih stolpcev, ki so tokrat podane v angleškem jeziku, ter dodana sta dva stolpca, ki povesta v katerem letu je igralec prvič in zadnjič igral za Arsenal (če igralec še vedno igra za klub je vrednost spremenljivke za tega nogometaša v stolpcu Last year enaka NA). Namesto imen stolpcev DRŽAVA, POZICIJA, LETNICE DELOVANJA, NASTOPI, ZADETKI imamo v tabeli arsenal sedaj imena stolpcev Nationality, Position, Arsenal career, Appearances,Goals. Dodana sta še stolpca First year in Last year(oba sestavljajo številske spremenljivke). Tudi tej tabeli je bilo potrebno dodati stolpec z urejenostno spremenljivko (Status). Nastala je tabela ARSENAL. Tabeli ARSENAL in NOGOMETASI sta po podatkih praktično identični, le da so imena stolpcev in vrednosti v stolpcu  Status v tabeli ARSENAL podane v angleščini(Beginner, Grown up, Legend) in pa seveda tabela ARSENAL vsebuje še dva dodatna stolpca (First year in Last year). Za analizo sem si zaradi zapisa v slovenščini raje izbral tabelo NOGOMETASI.

Nato je sledila izdelava dodatne tabele. Smiselno se mi je zdelo, da naredim analizo igrilnih mest, glede na podatke v tabeli NOGOMETASI. V podtabeli z imenom PODTABELAPOPOZICIJAH so imena vrstic mednarodne kratice pozicij (stolpec row.names). V tej tabeli so prikazana še popolna imena igralnih pozicij (stolpec POPOLNO.IME- imenska spremenljivka), prevodi v slovenščino (stolpec PREVOD- imenska spremenljivka), število igralcev v zgodovini kluba za vsako pozicijo (stolpec STEVILO.IGRALCEV- številska spremenljivka), število nastopov po pozicijah (stolpec NASTOPI.PO.POZICIJAH- številska spremenljivka), zadetki po pozicijah (stolpec ZADETKI.PO.POZICIJAH- številska spremenljivka), ter povprečje zadetkov na število nastopov (stolpec POVPRECJE.ZADETKOV.NA.STEVILO.NASTOPOV- številska spremenljivka). Ker je bil prvi namen narediti podtabelo zato, da bi imel dva grafa, ki bi smiselno predstavljala različne stvari, sem se po nasvetu profesorja odločil, da naredim še eno podtabelo, ki bo naredila graf pozicij bolj urejen. Podtabela UREJENAPODTABELA vsebuje enake podatke kot PODTABELAPOPOZICIJAH le, da je na prvem mestu v tabeli vratar, nato branilci in na koncu še napadalci. To tabelo sem dobil tako, da sem podatke iz podtabele PODTABELAPOPOZICIJAH tretvoril v excel po takem vrstnem redu kot je napisano v prejšnjem stavku. Zatem sem excel datoteko shranil v CSV obliki ter jo po že znani poti uvozil v R.

Ko sem zaklučil z uvozom sem se lotil risanja grafov. Za oba grafa sem uporabil funkcijo barplot(), saj se mi je stolpični prikaz zdel za moja grafa najbol pregleden. Za barvo stolpcev sem izbral rdečo, saj je le ta tudi klubska barva.

3.FAZA: Analiza in vizualizacija podatkov
V tej fazi sem narisal zemjevid, ki prikazuje iz katerih držav prihajajo igralci mojega omiljenega kluba. Za začetek sem uvozil zemljevid sveta, zatem pa prikazal le Evropo ter Afriko, ter dodal še Brazilijo. Razlog je v tem , da nogometaši, ki so kadarkoli zaigrali za Arsenal FC prihajajo ali so prihajali le iz teh dveh celin in Brazilije. Po nasvetu profesorja sem zaradi lepote zemljevida nakoncu prikazal še Azijo, ter Severno in Južno Ameriko. Nato sem na zemljevidu obarval le tiste države, iz katerih prihajajo igralci. Te države sem tudi poimenoval, tako da človek, ki ni ravno poznavalec geografije ve, katere države so zastopali ali jih še zastopajo nogometaši, ki jih analiziram. Za zaključek sem na zamljevid narisal še kje se nahaja stadion nogometnega kluba. Za barvo pike sem izbral rdečo iz enakih razlogov kot pri stolpcih v grafih.

Zemljevid torej prikazuje vse države iz katerih so ali še prihajajo igralci Arsenala. Države na zemljevidu so tudi poimenovane. Države so pobarvane z različnimi barvami glede na število igralcev, ki prihajajo iz le teh. Koliko igralcev prihaja iz določene države prikazuje legenda, ki podaja par, številko in barvo. Države iz katerih v zgodovini kluba ni prihajal noben igralec so pobarvane z belo. Na zemljevidu je z rdečo piko prikazana tudi lokacija štadiona, kjer domuje Arsenal. Vidimo, da so nekateri prepotovali dolgo pot, da so prišli do Londona.

4.FAZA:NAPREDNA ANALIZA PODATKOV
Četrto fazo projekta sem pričel z uvozom tabele v CSV obliki. Tabela ZADNJIH50 prikazuje podatke o zadnjih pedesetih nogometaših, ki so zaigrali za Arsenal. Tabelo sem sestavil sam iz že znanih podatkov, ki sem jih dobil iz tabele NOGOMETASI in pa podatkov, ki sem jih poiskal z različnih spletnih strani. Imena stolpcev v tabeli so imena zadnjih pedesetih nogometašev iz tabele NOGOMETASI. Tabela pa vsebuje tudi stolpce DRZAVA (dobil sem ga iz tabele NOGOMETASI in pove iz katere države prihaja posamezen igralec- imenska spremenljivka), POZICIJA (stolpec dobljen iz tabele NOGOMETASI,ki pove igralno mesto igralca v mednarodnih kraticah- imenska spremenljivka) , VISINA (stolpec podatkov o telesni višini igralca- številska spremenljivka), TRAJANJE.KARIERE (pove dolžino celotne profesionalne kariere igralca v letih- številska spremenljivka), STEVILO.KLUBOV.V.KARIERI (pove za koliko različnih klubov je igralec igral v svoji karieri- številska spremenljivka), LETNICE.DELOVANJA.V.ARSENALU (stolpec podatkov dobljen iz tabele NOGOMETASI, ki pove od katerega do katerega leta je igralec igral za Arsenal- številska spremenljivka), TRAJANJE.KARIERE.V.ARSENALU (stolpec podatkov, ki pove koliko let je igralec igral za Arsenal- številska spremenljivka), NASTOPI.ZA.ARSENAL (stolpec podatkov dobljen iz tabele NOGOMETASI,ki pove koliko nastopov je igralec zbral za Arsenal- številska spremenljivka), NASTOPI.ZA.DRUGE.KLUBE (pove število nastopov, ki jih je igralec zbral za ostale klube, ne Arsenal- številska spremenljivka), ZADETKI.ZA.ARSENAL (stolpec dobljen iz tabele NOGOMETASI, ki pove koliko zadetkov je vsak igralec zabil za Arsenal- številska spremenljivka), ZADETKI.ZA.DRUGE.KLUBE (stolpec pove koliko zadetkov je igralec zabil za klube ko ni igral za Arsenal- številska spremenljivka), REPREZENTANCNI.NASTOPI (stolpec, ki pove število reprezentančnih nastopov- številska spremenljivka), REPREZENTANCNI.ZADETKI (stolpec, ki pove število raprezentančnih golov- številska spremenljivka).

Za uvozom tabele ZADNJIH50 pa sem se lotil analize. Zastavil sem si vprašanje, kateri igralec med zadnjimi pedesetimi je dosegel največ v svoji karieri nasploh. Ta podatek sem dobil s hierarhičnim razvrščanjem v skupine.

Iz tabele ZADNJIH50 sem normaliziral podatke iz stolpcev TRAJANJE.KARIERE}, STEVILO.KLUBOV.V.KARIERI|, TRAJANJE.KARIERE.V.ARSENALU, NA\-STO\-PI.ZA.ARSENAL, NASTOPI.ZA.DRUGE.KLUBE, ZADETKI.ZA.ARSENAL, ZADETKI.ZA.DRUGE.KLUBE, REPREZENTANCNI.NASTOPI, REPREZENTANCNI.ZADETKI}. Nato sem s funkcijo dist() dobil matriko razdal, ki je potrebna za hierarhično razvrščanje. Razdelitev sem opravil z metodo complete in dobil dendrogram, na katerem sem igralce razdelil v štiri skupine.

Dendrogram  prikazuje razdelitev v štiri skupine glede na dosežke posameznega nogometaša.
Iz dendrograma lahko vidimo, da ste najboljša igralca med zadnjimi pedesetimi Henry in Bergkamp, ki ju najdemo v prvi skupini. 

Ko sem dobil dendogram sem se vprašal kako bi lahko dokazal trditev, da sta Henry in Bergkamp res najboljša. Podatek sem dobil ko sem narisal grafe parov.

Vidimo, da rdeča krogca odstopata od krogcov ostalih barv, ki prikazujejo nogometaše ostalih skupin. Henry in Bergkamp sta torej osamelca, kar dokazuje da sta res najboljša.


Zatem sem se vprašal kdo pa je tretji najboljši igralec med zadnjimi pedesetimi nogometaši. Odgovor sem dobil, ko sem naredil novo hierarhično razdelitev v štiri skupine z metodo enojnega povezovanja. Dobil sem naslednji dendrogram.

Dendrogra prikazuje hierarhično razvrščanje v štiri skupine z metodo enojnega povezovanja. Vidimo, da se dendogram že v začetku deli na dva dela. En del vsebuje Henrya in Bergkampa, drugi pa ostale nogometaše. Del z ostalimi se nato deli še na dva dela. Od tod lahko vidimo, da je tretji najboljši igralec Robin van Persie. Tako lahko trdimo, da so trije najboljši igralci med zadnjimi pedesetimi Henry,Bergkamp in van Persie.

Po nasvetu profesorja sem se odočil, da prikažem še hierarhično razvrščanje glede na uspešnost igralcev v karieri z metodo ward. Tokrat sem igralce razdelil v šest skupin. 

Dendrogram prikazuje hierarhično razdelitev na šest skupin glede na dosežke vsakega igralca posebej. Podatek v katero skupino spada vsak posamičen nogometaš dobimo s pomočjo funkcije cutree(). Vektor, ki to pove sem poimenoval skupine. S pomočjo vektorja skupine vidimo, da sta Henry in Bergkamp v skupini 1. Tudi s pomočjo tega dendrograma je vidno, da sta najboljša. Najslabše rezultate pa imajo igralci v skupini 4, torej prvi iz leve na grafu.

Zatem se mi je porodilo vprašanje, kateri trije igralci med zadnjimi pedesetimi pa so največji pečat pustili v Arsenalu. To je bil tudi cilj naloge, ugotoviti kdo je bil najboljši znotraj kluba. Sedaj sem za izračun matrike razdalj uporabil le podatke, ki se navezujejo na kariero v Arsenalu. Normaliziral sem podatke iz stolpcev TRAJANJE.KARIERE.V.ARSENALU, NASTOPI.ZA.ARSENAL in ZADETKI.ZA.ARSENAL. S pomočjo izračunane matrike razdalj sem dobil nov dendrogram, ki prikazuje hierarhično razdelitev podatkov z metodo enojnega povezovanja. Podatke sem ponovno razvrstil v štiri skupine.

Dendrogram prikazuje razdelitev glede na dosežke vsakega igralca posebej za FC Arsenal. Iz dendrograma vidimo, da je najboljši igralec Thiery Henry. Sledita mu ponovno Dennis Bergkamp kot drugi najboljši in pa Robin van Persie kot tretji.

Da sem se prepričal, da trditev o treh najboljših drži sem ponovno narisal grafe parov.

Grafi prikazujejo razmerja med posameznimi spremenjivkami, ki sem jih normaliziral ob izračunu matrike razdalj. Vidimo da modri, rumeni in rdeči krogec močno odstopajo od ostalih. S pomočjo preprostih ukazov sem ugotovil, da modri krogec predstavlja Henrya, rdeči Bergkampa, rumeni pa van Persieja. Iz grafov vidimo, da modri krogec res najbol odsopa od ostalih, tudi od rdečega in rumenega. Rdeči krogec, ki predstavlja  Bergkampa zaostaja za modrim a še vedno odstopa od rumenega in ostalih zelenih krogcev. Za rumeni krogec pa vidimo da odstopa od ostalih zelenih krogcev, vendar zaostaja za obema tako rdečim, kot tudi modrim krogcem. S tem je bila naša trditev, da so najboljši trije igralci med zadnjimi pedesetimi Thiery Henry, Dennis Bergkamp in Robin van Persie.

Podobno vidimo tudi z Wardovo metodo minimalne variance. 

Graf prikazuje hierarhično razvrščanje po Wardovi metodi najmanjše variance v šest skupin.
Vidimo da sta Henry in Berkamp res najboljša, sledi pa jima van Persie. Iz grafa vidimo, da za Robinom veliko ne zaostaja Robert Pires.

Na tej stopni sem zaključil z grupiranjem v skupine in se osredotočil na napoved podatkov. Za cilj sem si zadal, da napovem število danih in prejetih golov v angleški Barclays Premier League za naslednjih deset let glede na podlagi podatkov za zadnjih deset let oziroma sezon.

Da sem lahko to naredil sem za začetek potreboval novo tabelo. Zbral sem potake z uradne strani  
Barclays Premier League in dobil tabelo ARSENALSTATISTIKA, ki sem jo v program uvozil s pomočjo uvoza za CSV datoteko. Tabelo sestavljajo same številske spremenljivke, pri čemer so imena vrstic letnice konca vsake sezone za deset let nazaj. Tabelo sestavljajo stolpci STEVILO.TEKEM (koliko tekem se je odigralo), ZMAGE (koliko zmag je dosegel Arsenal), NEODLOCENO (kolikokrat je Arsenal igral neodločeno), PORAZI (kolikokrat je izgubil), DANI.ZADETKi (koliko golov je dosegel), PREJETI.ZADETKI (koliko golov je prejel), GOL.DIFERENCA (razlika med prejetimi in danimi goli), TOCKE (kaliko toč je zbral) in KONCNO.MESTO (katero končno mesto je Arsenal dosegel).

Za uvozem tabele sem se lotil napovedi za dane in prejete zadetke vse do leta 2024. Napoved sem naredil na podlagi grafov, ki sem ju dobil s pomočjo funkcije barplot(). Na njih so s pikicami označene vrednosti za dane in prejete zadetke od leta 2005 do 2014. Na grafih pa so prikazane tudi tri krivulje s tremi različnimi barvami za tri različne tipe napovedi.

Graf prikazuje vrednosti za dane zadetke od leta 2005 do 2014 in krivulje linearne, kvadratne in gam napovedi do leta 2024.V levem spodnjem kotu sem podal tudi enačbi linearne in kvadratne krivulje, pri čemer so koeficienti zaokroženi na dve decimalni mesti natančno. Vidimo, da bo število danih zadetkov od leta 2014 z linearno in gam metodo padalo, s kvadratno pa raslo. Po metodi gam naj bi leta 2024 padlo manj kot 40 zadetkov v sezoni. Glede na izkušnje in poznavanje kluba lahko trdim, da se to ne bo zgodilo saj klub vsako leto producira nove nevarne napadalce, ki so med najboljšimi v ligi. Bolj realni sta linearna in kvadratna metoda, vendar pri kvadratni vrednosti rastejo, pri linearni pa padajo. Kvadratna metoda napoveduje da bo Arsenal v letu 2024 zabil celo cez 90 zadetkov. Trditev, da to ni možno je napačna, vendar se kvaliteta moštev in enakovrednost v ligi vsako leto povečujeta. Na podlagi tega je možnost za to napoved majhna a mogoča. Najbolj realna je po mojem mnenju napoved z linearno metodo. Število zadetkov bo padalo iz leta v leto vendar se bo le to gibalo nekje okoli 70 zadetkov na sezono. 

Graf prikazuje vrednosti za prejete zadetke od leta 2005 do 2014 in krivulje linearne, kvadratne in gam napovedi do leta 2024. V levem spodnjem kotu sem podal tudi enačbi linearne in kvadratne krivulje, pri čemer so koeficienti zaokroženi na dve decimalni mesti natančno. Vidimo, da bo število prejetih zadetkov s kvadratno in gam metodo od leta 2014 naprej padalo, z linearno pa raslo. Po metodi gam naj bi leta 2024 Arsenal prejel manj kot 30 zadetkov. Glede na dosedanje sezone bi bilo to možno saj je v letih 2006 in 2008 Arsenal prejel zgolj 31 zadetkov. Napoved je možna a malo vrjetna saj se to v zadnjih desetih sezonah še ni zgodilo. Po linearni metodi bo število prejetih zadetkov močno raslo. Leta 2024 pa naj bi Arsenal prejel kar 55 zadetkov. Ta napoved se mi ne zdi možna saj Arsenal vsako leto kreira vhr prvenstvene lestvice, kar pa s takim številom prejetih zadetkov nebi bilo izvedljivo. Prav zako Arsenal v zadnjih desetih letih ni prejel več kot 50 zadetkov na sezono. Po mojem mnenju je najbolj realna napoved s kvadratno metodo. Število prejetih zadetkov naj bi nekje do leta 2017 počasi raslo, kar je posledica rasti prejetih zadetkov v zadnjih dveh sezonah. Po rasti pa naj bi do leta 2024 padalo, vse pa naj bi potekalo med vrednostima 40 in 45 prejetih golov v sezoni. Ta napoved je smiselna in uresničjiva tudi zaradi že omenjene vedno boljše enakosti in  kvalitete ekip v angleški ligi. 

Nogomet pa je nepredvidljiva igra kjer je žoga okrogla. Zato je zelo težko za vsako ekipo napovedati kako se bo izkazala v prihodnjih sezonah, saj se lahko v razplet umešajo tudi poškodbe in ostali izven nogometni dejavniki.
